"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModuleCategoryMerger = void 0;
const module_merger_1 = require("./module_merger");
/**
 * Merger that merges the content of modules based on their JSDoc module annotation and category.
 */
class ModuleCategoryMerger extends module_merger_1.ModuleMerger {
    /**
     * Creates an identifier for the module's bundle.
     * @param module The module for which the identifier is generated.
     * @returns The identifier for the module's bundle.
     */
    // eslint-disable-next-line class-methods-use-this
    createModuleBundleId(module) {
        var _a, _b;
        const categoryTags = (_b = (_a = module.comment) === null || _a === void 0 ? void 0 : _a.blockTags.filter((ct) => ct.tag === "@category")) !== null && _b !== void 0 ? _b : [];
        const categoryTagTexts = categoryTags.map((ct) => ct.content.map((c) => c.text).join()).sort();
        return module.name + "_[[[CATEGORIES:]]]_" + categoryTagTexts.join("_[[[|]]]_");
    }
}
exports.ModuleCategoryMerger = ModuleCategoryMerger;
